#include <iostream>
using namespace std;

class LiarGame
{
public:
	int questionCount;
	int rage;

public:
	LiarGame() : questionCount(0), rage(0) {};
	void countUp() { questionCount++; }
	void rageUp(int x) { rage = rage + x; }
	void LiarGameStart()
	{
		cout << "---------------------------------------------------------------------------------------\n" << endl;
		cout << "당신은 싸늘한 통로를 지나 다음 방의 입구에 도착했습니다." << endl;
		cout << "방 너머에서 누군가가 대화하는 소리가 들립니다." << endl;
		cout << "문이 열리자 당신은 방 안으로 들어갑니다. 다섯명의 사람들이 제각기 다른 표정을 지은채로 대화하고 있습니다." << endl;
		cout << "당신이 들어가자 그들은 대화를 멈추고 일제히 당신을 쳐다봅니다. 그리고 그 중 무표정한 남자가 당신에게 이렇게 말합니다." << endl;
		cout << " \"이봐, 우리 지금 곤란한 상황에 빠져있는데 당신이 해결해 줄 수 있을까?\"" << endl;
		cout << "그는 당신에게 사정을 설명합니다..\n" << endl;
		// 룰 설명
		cout << "방의 규칙 1. 5명 중에 1명은 이 방을 나갈 수 있는 열쇠를 숨기고 있다." << endl;
		cout << "방의 규칙 2. 5명은 각자 당신에게 열쇠의 행방에 대한 힌트를 줄 것이다." << endl;
		cout << "방의 규칙 3. 그러나 이들 중 단 한 명은 거짓말을 하고있다." << endl;
		cout << "방의 규칙 4. 당신은 거짓말을 하는 사람과 열쇠를 갖고 있는 사람을 모두 찾아야 한다." << endl;
		cout << "---------------------------------------------------------------------------------------\n\n" << endl;

		LiarGame Person1;
		LiarGame Person2;
		LiarGame Person3;
		LiarGame Person4;
		LiarGame Person5;
		int selectNum = 0;

		while (Person1.questionCount == 0 || Person2.questionCount == 0 || Person3.questionCount == 0 || Person4.questionCount == 0 || Person5.questionCount == 0)
		{
			cout << "★ 누구의 말을 들어보시겠습니까?\n" << endl;
			cout << "1) 무표정한 남자" << endl;
			cout << "2) 미소를 짓고 있는 여자" << endl;
			cout << "3) 불안한 표정을 짓고 있는 남자" << endl;
			cout << "4) 화난 표정을 짓고 있는 노인" << endl;
			cout << "5) 졸린 표정을 짓고 있는 소녀" << endl;
			cout << "6) 범인 지목하기\n" << endl;

			cin >> selectNum;

			if (selectNum == 1)
			{
				if (Person1.questionCount == 0)
				{
					Person1.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "무표정한 남자는 표정 하나 바꾸지 않고 말합니다." << endl;
					cout << "\"나한테는 열쇠가 없어. 누가 가져간 것을 본 적도 없고 말이야.\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "☆ 다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person1.questionCount == 1)
				{
					Person1.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "무표정한 남자는 무미건조하게 말합니다." << endl;
					cout << "\"뭐야? 나한테는 열쇠가 없다니까? 자꾸 귀찮게 굴지 말라고.\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "☆ 다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person1.questionCount == 2)
				{
					Person1.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "무표정한 남자는 조금 화가난 표정으로 말합니다." << endl;
					cout << "\"난 열쇠도 없고, 너한테 관심도 없으니까 이제 다른 사람한테 가서 물어봐!\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "☆ 다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person1.questionCount >= 3)
				{
					Person1.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "무표정한 남자는 더이상 당신을 상대하려 하지 않습니다." << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "☆ 다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}

			}
			else if (selectNum == 2)
			{
				if (Person2.questionCount == 0)
				{
					Person2.countUp();
					cout << "\n---------------------------------------------------------------------------" << endl;
					cout << "여자는 즐거운 일이라도 있는 듯이 웃으며 말합니다." << endl;
					cout << "\"내가 아까부터 쭉 보고 있었는데, 저기 불안한 표정을 짓고 있는 남자는 열쇠가 없을거야.\"" << endl;
					cout << "---------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person2.questionCount == 1)
				{
					Person2.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "여자는 여전히 웃으며 말합니다." << endl;
					cout << "\"하하, 저 불안한 표정의 남자는 열쇠가 없을거라니까? 내기해도 좋아.\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person2.questionCount == 2)
				{
					Person2.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "여자는 곤란한 듯 웃으며 말합니다." << endl;
					cout << "\"어머, 너 지금 나 의심하는 거야? 정말 저기 불안해 보이는 남자는 열쇠가 없을거야!\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person2.questionCount >= 3)
				{
					Person2.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "여자는 난처한 듯이 웃을 뿐, 더이상 당신을 상대해 주지 않습니다." << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
			}
			else if (selectNum == 3)
			{
				if (Person3.questionCount == 0)
				{
					Person3.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "남자는 금방이라도 울어버릴 것 같은 표정으로 말합니다." << endl;
					cout << "\"저 무서운 노인은 절대 열쇠가 없을거야...\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person3.questionCount == 1)
				{
					Person3.countUp();
					cout << "\n-------------------------------------------------------------------------------------" << endl;
					cout << "남자는 주위의 눈치를 보며 말합니다." << endl;
					cout << "\"저 영감님 아까부터 화만 내고 계셔서 열쇠따윈 관심도 없을거야. 저 사람한테는 없는게 분명해...\"" << endl;
					cout << "-------------------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person3.questionCount == 2)
				{
					Person3.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "남자는 이제 당신에게 짜증내며 말합니다." << endl;
					cout << "\"나한테 왜 그래? 저 노인에게는 열쇠가 없다고 말해줬잖아? 저리 좀 가!\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person3.questionCount >= 3)
				{
					Person3.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "남자는 당신을 노려볼 뿐, 아무 말도 하지 않습니다." << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
			}
			else if (selectNum == 4)
			{
				if (Person4.questionCount == 0)
				{
					Person4.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "노인은 불같이 화를 내며 말합니다." << endl;
					cout << "\"저 싱글거리는 여자는 거짓말을 하고 있어!\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person4.questionCount == 1)
				{
					Person4.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "노인은 길길이 날뛰며 말합니다." << endl;
					cout << "\"저 여자는 거짓말을 하고 있다, 이말이야! 내 말을 못믿는게야?\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person4.questionCount == 2)
				{
					Person4.countUp();
					cout << "\n---------------------------------------------------------------------------" << endl;
					cout << "노인은 길길이 날뛰며 말합니다." << endl;
					cout << "\"젊은 놈이 귀가 먹었어? 저 여자가 거짓말을 하고 있다니까! 이제 썩 꺼져!\"" << endl;
					cout << "---------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person4.questionCount >= 3)
				{
					Person4.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "당신은 노인에게 혼나는 것이 무서워 더이상 말을 걸지 못합니다." << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
			}
			else if (selectNum == 5)
			{
				if (Person5.questionCount == 0)
				{
					Person5.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "소녀은 금방이라도 잠들 것 같은 목소리로 말합니다." << endl;
					cout << "\"열쇠는 저기 웃고 계신 여자분이 들고있어요...\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person5.questionCount == 1)
				{
					Person5.countUp();
					cout << "\n-------------------------------------------------------------------------" << endl;
					cout << "소녀은 당신이 귀찮은 듯이 말합니다." << endl;
					cout << "\"여자분이 열쇠를 들고 있다니까요... 거짓말을 하고 있는 사람은 잘 모르겠고.\"" << endl;
					cout << "-------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person5.questionCount == 2)
				{
					Person5.countUp();
					cout << "\n----------------------------------------------------------------------------------------" << endl;
					cout << "소녀은 눈살을 마구 찌푸리며 말합니다." << endl;
					cout << "\"당신 뭐하는 사람이에요? 같은 말 반복하게 만들지 말고 열쇠 찾고 싶으면 여자분한테 물어보세요.\"" << endl;
					cout << "----------------------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
				else if (Person5.questionCount >= 3)
				{
					Person5.countUp();
					cout << "\n----------------------------------------------------------------------------------------" << endl;
					cout << "소녀은 졸고있는 듯 합니다. 아무래도 깨우면 안될 것 같습니다." << endl;
					cout << "----------------------------------------------------------------------------------------\n" << endl;
					cout << "★다른 사람에게 말을 걸려면 \'엔터키\'를 누르세요." << endl;
					cin.ignore();
					cin.get();
				}
			}
			else if (selectNum == 6)
			{
				Person1.questionCount = 1;
				Person2.questionCount = 1;
				Person3.questionCount = 1;
				Person4.questionCount = 1;
				Person5.questionCount = 1;
				selectNum = 0;
			}
			else
			{
				cout << "잘못된 번호입니다. 다시 입력하세요.\n" << endl;
			}
			

		}

		do 
		{
			cout << "\n==================================================================" << endl;
			cout << "★ 모든 사람의 말을 종합했을 때, 거짓말을 하는 사람은 누구입니까?" << endl;
			cout << "1) 무표정한 남자" << endl;
			cout << "2) 미소를 짓고 있는 여자" << endl;
			cout << "3) 불안한 표정을 짓고 있는 남자" << endl;
			cout << "4) 화난 표정을 짓고 있는 노인" << endl;
			cout << "5) 졸린 표정을 짓고 있는 소녀" << endl;
			cout << "\n==================================================================" << endl;
			cin >> selectNum;

			if (selectNum == 1)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "무표정한 남자는 지목당하자 어이가 없는 표정을 짓습니다." << endl;
				cout << "\"내가 거짓말을 하고 있다고? 아무래도 내가 부탁할 사람을 잘못 고른 것 같군!\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else if (selectNum == 2)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "미소를 짓던 여자는 지목당하자 표정이 싸늘하게 변합니다." << endl;
				cout << "\"너 미쳤구나? 내가 너한테 웃어주니까 네가 뭐라도 된 것 같지?\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else if (selectNum == 3)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "불안한 표정의 남자는 지목당하자 당신을 죽일 듯이 노려봅니다." << endl;
				cout << "\"내가 만만해? 네 잘난 탐정 놀이도 여기까지야.\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else if (selectNum == 4)
			{
				cout << "\n----------------------------------------------------------------------------------------------------------------" << endl;
				cout << "노인은 지목당하자 갑자기 화내기를 멈췄습니다. 이윽고 기괴한 표정을 짓더니 소름끼치는 웃음소리를 내며 어디론가 도망쳤습니다." << endl;
				cout << "\"저건 도대체 뭐였던거지...?\"" << endl;
				cout << "방에 남은 사람들은 저마다 놀란 반응을 보이며 다시 당신에게 주목합니다." << endl;
				cout << "----------------------------------------------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 성공! : 생존자들의 큐브 탈출을 방해하는 의문의 존재를 쫓아냈습니다!" << endl;
			}
			else if (selectNum == 5)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "졸린 표정의 소녀는 당신을 비웃습니다." << endl;
				cout << "\"이럴 줄 알았지. 역시 똑똑한 척 하는 것들은 하는 짓도 다 똑같다니깐?\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else
			{
				cout << "잘못된 번호입니다. 다시 입력하세요.\n" << endl;
			}
			
		}
		while(selectNum > 5 || selectNum < 0);

		do
		{
			cout << "\n==================================================================" << endl;
			cout << "★ 모든 사람의 말을 종합했을 때, 열쇠를 가진 사람은 누구입니까?" << endl;
			cout << "1) 무표정한 남자" << endl;
			cout << "2) 미소를 짓고 있는 여자" << endl;
			cout << "3) 불안한 표정을 짓고 있는 남자" << endl;
			cout << "4) 도망친 노인" << endl;
			cout << "5) 졸린 표정을 짓고 있는 소녀" << endl;
			cout << "\n==================================================================" << endl;
			cin >> selectNum;

			if (selectNum == 1)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "무표정한 남자는 지목당하자 어이가 없는 표정을 짓습니다." << endl;
				cout << "\"뭐야? 나한텐 열쇠가 없다고 분명히 말했을텐데? 제정신이 아니군.\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else if (selectNum == 2)
			{
				cout << "\n---------------------------------------------------------------------------------------------" << endl;
				cout << "미소를 짓던 여자는 지목당하자 미소를 거두고 당황한 기색을 보입니다." << endl;
				cout << "\"무슨 소리야? 내가 열쇠를 숨겼다는 말이야?\"" << endl;
				cout << "여자는 당신을 엉터리라며 매도하기 시작합니다. 그 순간, 여자의 주머니에서 반짝이는 것이 떨어졌습니다." << endl;
				cout << "떨어진 물건은 열쇠였습니다! 당신은 떨어진 열쇠를 낚아채서 방의 출구를 개방했습니다." << endl;
				cout << "---------------------------------------------------------------------------------------------\n" << endl;
				cout << "☆ 탈출 성공! : 여자를 추궁하는 사람들을 남겨둔 채 당신은 다음방으로 통하는 복도를 나아갑니다.\n" << endl;
			}
			else if (selectNum == 3)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "불안한 표정의 남자는 지목당하자 " << endl;
				cout << "\"당신 똑똑한 줄 알았는데, 이제보니 영 아니잖아?\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else if (selectNum == 4)
			{
				cout << "\n----------------------------------------------------------------------------------------------------------------" << endl;
				cout << "당신은 도망친 노인이 열쇠를 가지고 있다고 말했습니다." << endl;
				cout << "\"뭐? 그게 말이 되는 소리라고 생각해?\"" << endl;
				cout << "----------------------------------------------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else if (selectNum == 5)
			{
				cout << "\n-------------------------------------------------------------------------" << endl;
				cout << "졸린 표정의 소녀는 당신을 업신여기며 말합니다." << endl;
				cout << "\"정말 멍청한 사람이 따로 없네요.\"" << endl;
				cout << "-------------------------------------------------------------------------\n" << endl;
				cout << "☆ 지목 실패 : 당신은 방에서 쫓겨나 싸늘한 복도에서 보잘 것 없는 생을 마감했습니다." << endl;
			}
			else
			{
				cout << "잘못된 번호입니다. 다시 입력하세요.\n" << endl;
			}
		}
		while(selectNum < 0 || selectNum > 5);
	}
};

int main()
{
	LiarGame a;
	a.LiarGameStart();
	system("pause");
}
